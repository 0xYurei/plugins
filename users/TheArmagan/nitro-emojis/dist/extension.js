(function(u,s){"use strict";function p(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var d=p(u);class h{constructor(){this.patches=[]}add(...t){this.patches.push(...t)}remove(t){let[i]=this.patches.splice(this.patches.indexOf(n=>n==t),1);i()}removeAll(){let t=this.patches.splice(0,this.patches.length);for(let i=0;i<t.length;i++)t[i]()}}var l=new h;const f=/<(a)?:([^:]{2,})+:(\d+)>/g;var m={load(){l.add(d.default.instead("sendMessage",s.MessageActions,async function(e,t){let i=s.SelectedGuildStore.getGuildId();return e[1]&&e[1].content&&(e[1].invalidEmojis=[],e[1].validNonShortcutEmojis=e[1].validNonShortcutEmojis.filter(n=>!n.available),e[1].content=e[1].content.replace(f,(n,v,c,o)=>{if(!c.trim())return n;let{emojis:r}=s.QueryActions.queryEmojiResults({query:c}),a=[...r.locked,...r.unlocked].find(y=>y.id==o);return a&&!a.animated&&i&&a.guildId==i?n:` https://cdn.discordapp.com/emojis/${o}.${v=="a"?"gif":"png"}?size=32`}).trim()),t.call(this,...e)})),l.add(d.default.instead("canUseEmojisEverywhere",s.PremiumActions,async function(e,t){return!0}))},unload(){l.removeAll()},settings:{data:[{type:"input",altType:"number",property:"size",value:"48",name:"Emote Size",description:"Allowed sizes: 16, 32, 48, 64, 96, 128, 256, 512, 1024",size:"small"}]}};return m})(acord.patcher,acord.modules.common);
