(function(n,l,s,o){"use strict";function c(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var u=c(n);class r{constructor(){this.patches=[]}add(...t){this.patches.push(...t)}remove(t){let[i]=this.patches.splice(this.patches.indexOf(g=>g==t),1);i()}removeAll(){let t=this.patches.splice(0,this.patches.length);for(let i=0;i<t.length;i++)t[i]()}}var d=new r;const a={guildsToSee:new Set};var h={load(){d.add(u.default.after("can",l.PermissionStore,function(e,t){if(e[1]&&e[1].guild_id&&a.guildsToSee.has(e[1].guild_id))return!0})),d.add(s.contextMenus.patch("guild-context",(e,t)=>{console.log(e,t),e.props.children.push(s.contextMenus.build.item({type:"separator"}),s.contextMenus.build.item({type:"toggle",label:o.i18n.format("SEE_HIDDEN_CHANNELS"),checked:a.guildsToSee.has(t.guild.id),async action(){for(a.guildsToSee[a.guildsToSee.has(t.guild.id)?"delete":"add"](t.guild.id),l.Router.transitionTo("/channels/@me");await new Promise(i=>setTimeout(i,50)),!document.querySelector('[class*="sidebar-"] [class*="privateChannels-"]'););l.Router.transitionToGuild(t.guild.id)}}))}))},unload(){d.removeAll(),a.guildsToSee.clear()}};return h})(acord.patcher,acord.modules.common,acord.ui,acord.extension);
