(function(n,i,c){"use strict";function o(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var h=o(i);class u{constructor(){this.patches=[]}add(...e){this.patches.push(...e)}remove(e){let[a]=this.patches.splice(this.patches.indexOf(l=>l==e),1);a()}removeAll(){let e=this.patches.splice(0,this.patches.length);for(let a=0;a<e.length;a++)e[a]()}}var r=new u,p=()=>c.injectCSS(".amd--deleted-message{background-color:#f047471a}"),g={load(){r.add(p());let t=[];r.add((()=>{let e=n.FluxDispatcher._actionHandlers._orderedActionHandlers.MESSAGE_DELETE.find(d=>d.name=="MessageStore"),a=e.actionHandler,l=e.storeDidChange;return e.actionHandler=d=>{if(!d?.id)return;let s=document.querySelector(`#chat-messages-${d?.id}`);!s||s.classList.contains("amd--deleted-message")||(s.classList.add("amd--deleted-message"),t.push(d.id))},e.storeDidChange=()=>{},()=>{t=[];let d=n.FluxDispatcher._actionHandlers._orderedActionHandlers.MESSAGE_DELETE.find(s=>s.name=="MessageStore");d.actionHandler=a,d.storeDidChange=l}})()),r.add(h.default.patch('[id*="chat-messages-"]',e=>{let a=e.id.split("-").pop();t.includes(a)&&e.classList.add("amd--deleted-message")}))},unload(){r.removeAll()}};return g})(acord.modules.common,acord.dom,acord.patcher);
