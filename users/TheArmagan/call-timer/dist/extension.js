(function(f,h,p,T,m,S){"use strict";function c(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var v=c(f),l=c(h),C=c(p),E=c(m);class N{constructor(){this.patches=[]}add(...n){this.patches.push(...n)}remove(n){let[t]=this.patches.splice(this.patches.indexOf(r=>r==n),1);t()}removeAll(){let n=this.patches.splice(0,this.patches.length);for(let t=0;t<n.length;t++)n[t]()}}var o=new N;const{SelectedGuildStore:g,ChannelStore:w,GuildStore:A,UserStore:$,FluxDispatcher:s}=E.default;function _(e){isNaN(parseInt(e))&&(e=0),e=Math.floor(e);let n=Math.floor(e/60/60);return`${n>0?`${n.toString().padStart(2,"0")}:`:""}${Math.floor(e/60%60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`}const i=acord.modules.webpack.findByProps("channel","voiceUsers","inner","beta"),d=acord.modules.webpack.find(e=>e?.subtext&&Object.keys(e).length==1);function b(){let e={startTime:Date.now(),render:!0};o.add((()=>{function t(r){r?.state==="RTC_CONNECTED"&&r?.context==="default"?(e.startTime=Date.now(),e.render=!0):r?.state=="RTC_DISCONNECTED"&&r?.context==="default"&&(e.startTime=Date.now(),e.render=!1)}return s.subscribe("RTC_CONNECTION_STATE",t),()=>s.unsubscribe("RTC_CONNECTION_STATE",t)})());function n(t){if(t.querySelector("ct--patched"))return;t.classList.add("ct--patched");let r=l.default.parents(t,'[class*="inner-"] > div')?.[0],a=l.default.parseHTML(`<div class="${d.subtext} ct--container"></div>`);e.startTime=Date.now(),e.render=!0,a.render=()=>{if(!e.render){a.innerHTML="";return}a.innerHTML=T.i18n.format("TIME_ELAPSED",_((Date.now()-e.startTime)/1e3))};let O=C.default.interval(a.render,1e3);a.render();let u=()=>a.unmount();a.unmount=()=>{o.remove(u),a.remove(),O()},o.add(u),r.appendChild(a)}document.querySelectorAll(`.${i.channel}.${d.subtext}`).forEach(t=>{n(t)}),o.add(v.default.on("domMutation",t=>{t.addedNodes.forEach(r=>{r.nodeType!=Node.TEXT_NODE&&r.querySelectorAll(`.${i.channel}.${d.subtext}`).forEach(a=>{n(a)})}),t.removedNodes.forEach(r=>{r.nodeType!=Node.TEXT_NODE&&r.querySelectorAll(".ct--patched").forEach(a=>{a?.unmount?.()})})}))}var x=()=>S.injectCSS(".ct--container{margin-top:8px;font-weight:400;font-size:12px}");function D(){o.add(x())}var y={load(){D(),b()},unload(){o.removeAll()}};return y})(acord.events,acord.dom,acord.utils,acord.extension,acord.modules.common,acord.patcher);
